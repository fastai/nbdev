# export


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

------------------------------------------------------------------------

<a
href="https://github.com/fastai/nbdev/blob/master/nbdev/export.py#L22"
target="_blank" style="float:right; font-size:smaller">source</a>

### ExportModuleProc

>  ExportModuleProc ()

*A processor which exports code to a module*

Specify `dest` where the module(s) will be exported to, and optionally a
class to use to create the module
([`ModuleMaker`](https://nbdev.fast.ai/api/maker.html#modulemaker), by
default).

Exported cells are stored in a `dict` called `modules`, where the keys
are the modules exported to. Those without an explicit module are stored
in the `'#'` key, which will be exported to `default_exp`.

``` python
everything_fn = '../../tests/01_everything.ipynb'

exp = ExportModuleProc()
proc = NBProcessor(everything_fn, exp)
proc.process()
test_eq(exp.default_exp, 'everything')
assert 'print_function'  in exp.modules['#'][1].source
assert 'h_n' in exp.in_all['some.thing'][0].source
```

### Optional export processors

------------------------------------------------------------------------

<a
href="https://github.com/fastai/nbdev/blob/master/nbdev/export.py#L37"
target="_blank" style="float:right; font-size:smaller">source</a>

### black_format

>  black_format (cell, force=False)

*Processor to format code with `black`*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cell</td>
<td></td>
<td></td>
<td>Cell to format</td>
</tr>
<tr>
<td>force</td>
<td>bool</td>
<td>False</td>
<td>Turn black formatting on regardless of settings.ini</td>
</tr>
</tbody>
</table>

``` python
_cell = read_nb('../../tests/export_procs.ipynb')['cells'][0]
black_format(_cell, force=True)
test_eq(_cell.source, 'j = [1, 2, 3]')
```

------------------------------------------------------------------------

<a
href="https://github.com/fastai/nbdev/blob/master/nbdev/export.py#L54"
target="_blank" style="float:right; font-size:smaller">source</a>

### scrub_magics

>  scrub_magics (cell)

*Processor to remove cell magics from exported code*

<table>
<thead>
<tr>
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cell</td>
<td>Cell to format</td>
</tr>
</tbody>
</table>

[`scrub_magics`](https://nbdev.fast.ai/api/export.html#scrub_magics) is
a processor that scrubs the jupyter “magics” lines out of exported
cells. This can be helpful when using tools like
[sparkmagic](https://github.com/jupyter-incubator/sparkmagic) or just
[Jupyter’s builtin
magics](https://ipython.readthedocs.io/en/stable/interactive/magics.html)
in an nbdev project.

Usage:  
This behavior can be enabled by passing
[`scrub_magics`](https://nbdev.fast.ai/api/export.html#scrub_magics)
into the `--procs` flag of the
[`nbdev_export`](https://nbdev.fast.ai/api/doclinks.html#nbdev_export)
command. - `nbdev_export --procs scrub_magics` -
`nbdev_export --procs 'scrub_magics black_format'`

Example:

A cell like below could export the line `"hello nbdev"` into the `bar`
module. And the `%%spark` magic line would be omitted.

``` python
%%spark
#|export bar
"hello nbdev"
```

It will export as something similar to this:

``` python
# %% ../path/to/01_bar.ipynb 1
"hello nbdev"
```

``` python
_cell = read_nb('../../tests/export_procs.ipynb')['cells'][2]
scrub_magics(_cell)
test_eq(_cell.source, '''#|export bar
"hello nbdev"''')
```

------------------------------------------------------------------------

<a
href="https://github.com/fastai/nbdev/blob/master/nbdev/export.py#L64"
target="_blank" style="float:right; font-size:smaller">source</a>

### optional_procs

>  optional_procs ()

*An explicit list of processors that could be used by
[`nb_export`](https://nbdev.fast.ai/api/export.html#nb_export)*

``` python
# every optional processor should be explicitly listed here
test_eq(optional_procs(), ['black_format', 'scrub_magics'])
```

### [`nb_export`](https://nbdev.fast.ai/api/export.html#nb_export)

------------------------------------------------------------------------

<a
href="https://github.com/fastai/nbdev/blob/master/nbdev/export.py#L70"
target="_blank" style="float:right; font-size:smaller">source</a>

### nb_export

>  nb_export (nbname:str, lib_path:str=None, procs=None, name:str=None,
>                 mod_maker=<class 'nbdev.maker.ModuleMaker'>, debug:bool=False)

*Create module(s) from notebook*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>nbname</td>
<td>str</td>
<td></td>
<td>Filename of notebook</td>
</tr>
<tr>
<td>lib_path</td>
<td>str</td>
<td>None</td>
<td>Path to destination library. If not in a nbdev project, defaults to
current directory.</td>
</tr>
<tr>
<td>procs</td>
<td>NoneType</td>
<td>None</td>
<td>Processors to use</td>
</tr>
<tr>
<td>name</td>
<td>str</td>
<td>None</td>
<td>Name of python script {name}.py to create.</td>
</tr>
<tr>
<td>mod_maker</td>
<td>type</td>
<td>ModuleMaker</td>
<td></td>
</tr>
<tr>
<td>debug</td>
<td>bool</td>
<td>False</td>
<td>Debug mode</td>
</tr>
</tbody>
</table>

Let’s check we can import a test file:

``` python
shutil.rmtree('tmp', ignore_errors=True)
nb_export('../../tests/00_some.thing.ipynb', 'tmp')

g = exec_new('import tmp.some.thing')
test_eq(g['tmp'].some.thing.__all__, ['a'])
test_eq(g['tmp'].some.thing.a, 1)
```

We’ll also check that our ‘everything’ file exports correctly:

``` python
nb_export(everything_fn, 'tmp')

g = exec_new('import tmp.everything; from tmp.everything import *')
_alls = L("a b d e m n o p q".split())
for s in _alls.map("{}_y"): assert s in g, s
for s in "c_y_nall _f_y_nall g_n h_n i_n j_n k_n l_n".split(): assert s not in g, s
for s in _alls.map("{}_y") + ["c_y_nall", "_f_y_nall"]: assert hasattr(g['tmp'].everything,s), s
```

That notebook should also export one extra function to `tmp.some.thing`:

``` python
del(sys.modules['tmp.some.thing']) # remove from module cache
g = exec_new('import tmp.some.thing')
test_eq(g['tmp'].some.thing.__all__, ['a','h_n'])
test_eq(g['tmp'].some.thing.h_n(), None)
```

``` python
Path('../nbdev/export.py').unlink(missing_ok=True)
nb_export('04_export.ipynb')

g = exec_new('import nbdev.export')
assert hasattr(g['nbdev'].export, 'nb_export')
```
